<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Class 2: Deploy and Secure a modern application</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Class 2: Deploy and Secure a modern application"/>
  <meta name="product" content="Secure, Deliver and Optimize GenAI Apps with F5"/>
  <meta name="version" content="latest"/>
  <meta name="updated_date"  content="2024-12-17 10:43:27"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="Secure, Deliver and Optimize GenAI Apps with F5" content="latest"/>


  <!-- Version selector meta tags-->
  <meta name="version_meta_path" content="/training/community/template/versions.json">
  <meta name="project_safe" content="SecureDeliverandOptimizeGenAIAppswithF5">
  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Class 2: Deploy and Secure a modern application &#8212; Secure, Deliver and Optimize GenAI Apps with F5 </title>
    <link rel="stylesheet" href="../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/f5.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/f5-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/CoveoFullSearch.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://use.fontawesome.com/21fb8a09c3.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/clipboard.min.js"></script>
    <script type="text/javascript" src="../_static/copybutton.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Class 3: Architect, build and deploy AI Services" href="../class3/class3.html" />
    <link rel="prev" title="Class 1: The fundamental of Generative Artificial Intelligent (AI)" href="../class1/class1.html" /> 
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
        <h5>Secure, Deliver and Optimize GenAI Apps with F5 latest </h5>
        

        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/introduction.html">Introduction - GenAI Practitioner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../prerequisite/prerequisite.html">Prerequsite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class1/class1.html">Class 1: The fundamental of Generative Artificial Intelligent (AI)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Class 2: Deploy and Secure a modern application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#deploy-nginx-ingress-controller-with-app-protect-to-protect-web-apps-server">1 - Deploy Nginx Ingress Controller with App Protect to protect Web Apps Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deploy-arcadia-financial-modern-apps">2 - Deploy Arcadia Financial Modern Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="#recap">3 - Recap</a><ul class="simple">
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../class3/class3.html">Class 3: Architect, build and deploy AI Services</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class4/class4.html">Class 4: Enhance Modern Application with GenAI ChatBot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class5/class5.html">Class 5: Secure, Deliver and Optimize GenAI ChatBot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class6/class6.html">Class 6: AI Operations and Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../class7/class7.html">Class 7: Externalize Modern Apps with GenAI Services with F5XC Global DMZ</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Class 2: Deploy and Secure a modern application</a><ul>
<li><a class="reference internal" href="#deploy-nginx-ingress-controller-with-app-protect-to-protect-web-apps-server">1 - Deploy Nginx Ingress Controller with App Protect to protect Web Apps Server</a></li>
<li><a class="reference internal" href="#deploy-arcadia-financial-modern-apps">2 - Deploy Arcadia Financial Modern Apps</a></li>
<li><a class="reference internal" href="#recap">3 - Recap</a></li>
</ul>
</li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../index.html">Secure, Deliver and Optimize GenAI Apps with F5</a>

          <span class="right">
             <a href="../_sources/class2/class2.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-agility-labs-template">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="class-2-deploy-and-secure-a-modern-application">
<h1>Class 2: Deploy and Secure a modern application<a class="headerlink" href="#class-2-deploy-and-secure-a-modern-application" title="Permalink to this headline">¶</a></h1>
<img alt="../_images/mission2.png" src="../_images/mission2.png" />
<div class="section" id="deploy-nginx-ingress-controller-with-app-protect-to-protect-web-apps-server">
<h2>1 - Deploy Nginx Ingress Controller with App Protect to protect Web Apps Server<a class="headerlink" href="#deploy-nginx-ingress-controller-with-app-protect-to-protect-web-apps-server" title="Permalink to this headline">¶</a></h2>
<p>After login to linux Jumphost, change directory to <strong>webapps</strong>. Jumphost server was installed with utilities called ‘direnv’ - <a class="reference external" href="https://direnv.net/">https://direnv.net/</a>. Its a tools that will load the environment file (kubeconfig) when you switch to that directory. Its an efficient tools to switch K8S context from one cluster to the other just by changing directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> webapps
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get node
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get po -A
</pre></div>
</div>
<img alt="../_images/class2-1.png" src="../_images/class2-1.png" />
<p>Execute the following command to install NGINX Ingress controlle with the provided helm chart.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/webapps/nginx-ingress
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl create ns nginx-ingress
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>helm -n nginx-ingress install nginxic <span class="se">\</span>
oci://ghcr.io/nginxinc/charts/nginx-ingress -f values-plus-nap.yaml --version <span class="m">1</span>.4.0
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n nginx-ingress get pod,svc
</pre></div>
</div>
<img alt="../_images/class2-2.png" src="../_images/class2-2.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Please note that the purpose of this lab is not to provide a comprehensive guide for installing the NGINX Ingress Controller for AppProtect. Instead, it focuses on setting up a basic infrastructure to secure, deliver, and optimize GenAI applications. For detailed configuration best practices, please refer to the official documentation.</p>
<p class="last"><strong>values-plus-nap.yaml</strong> is the modified values file for nginx-ingress helm chat. There were few variable being updated for this deplayment.</p>
</div>
<p>values-plus-nap.yaml</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">appprotect</span><span class="p">:</span>
 <span class="c1">## Enable the App Protect WAF module in the Ingress Controller.</span>
 <span class="n">enable</span><span class="p">:</span> <span class="n">true</span>

<span class="n">image</span><span class="p">:</span>
 <span class="c1">## The image repository of the Ingress Controller.</span>
 <span class="n">repository</span><span class="p">:</span> <span class="n">reg</span><span class="o">.</span><span class="n">ai</span><span class="o">.</span><span class="n">local</span><span class="o">/</span><span class="n">ngx</span><span class="o">/</span><span class="n">nginx</span><span class="o">-</span><span class="n">plus</span><span class="o">-</span><span class="n">nap</span><span class="o">-</span><span class="n">ingress</span>

 <span class="c1">## The tag of the Ingress Controller image. If not specified the appVersion from Chart.yaml is used as a tag.</span>
 <span class="n">tag</span><span class="p">:</span> <span class="s2">&quot;3.7.0&quot;</span>

 <span class="c1">## It is recommended to use your own TLS certificates and keys</span>
 <span class="n">defaultTLS</span><span class="p">:</span>
   <span class="c1">## The base64-encoded TLS certificate for the default HTTPS server.</span>
   <span class="c1">## Note: It is recommended that you specify your own certificate. Alternatively, omitting the default server   secret completely will configure NGINX to reject TLS connections to the default server.</span>
   <span class="n">cert</span><span class="p">:</span> <span class="s2">&quot;xxxxxxx&quot;</span>

 <span class="c1">## The base64-encoded TLS key for the default HTTPS server.</span>
   <span class="c1">## Note: It is recommended that you specify your own key. Alternatively, omitting the default server secret   completely will configure NGINX to reject TLS connections to the default server.</span>
   <span class="n">key</span><span class="p">:</span> <span class="s2">&quot;xxxxxxx&quot;</span>

 <span class="n">wildcardTLS</span><span class="p">:</span>
   <span class="c1">## The base64-encoded TLS certificate for every Ingress/VirtualServer host that has TLS enabled but no   secret specified.</span>
   <span class="c1">## If the parameter is not set, for such Ingress/VirtualServer hosts NGINX will break any attempt to   establish a TLS connection.</span>
   <span class="n">cert</span><span class="p">:</span> <span class="s2">&quot;xxxxxxx&quot;</span>

   <span class="c1">## The base64-encoded TLS key for every Ingress/VirtualServer host that has TLS enabled but no secret   specified.</span>
   <span class="c1">## If the parameter is not set, for such Ingress/VirtualServer hosts NGINX will break any attempt to   establish a TLS connection.</span>
   <span class="n">key</span><span class="p">:</span> <span class="s2">&quot;xxxxxxx&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="deploy-arcadia-financial-modern-apps">
<h2>2 - Deploy Arcadia Financial Modern Apps<a class="headerlink" href="#deploy-arcadia-financial-modern-apps" title="Permalink to this headline">¶</a></h2>
<p>Deploy Arcadia Financial application on Kubernetes</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> ~/webapps/arcadia
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl create ns arcadia
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia apply -f frontend/
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia apply -f backend/
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia apply -f money-transfer/
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia apply -f refer-friends/
</pre></div>
</div>
<img alt="../_images/class2-3.png" src="../_images/class2-3.png" />
<p>Ensure all microservices are Ready and Running</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia get pod,svc
</pre></div>
</div>
<img alt="../_images/class2-3-1.png" src="../_images/class2-3-1.png" />
<p>Create nginx ingress resource to expose arcadia fronted service to outside of K8S.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia apply -f  arcadia-ai-local-ingress.yaml
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl -n arcadia get ingress
</pre></div>
</div>
<img alt="../_images/class2-4.png" src="../_images/class2-4.png" />
<p>Confirm that you can access to Arcadia Financial modern apps from the Jumphost.</p>
<img alt="../_images/class2-5.png" src="../_images/class2-5.png" />
<p>Login to the Arcadia Financial with the following credential</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Username</strong></td>
<td>olivia</td>
</tr>
<tr class="row-even"><td><strong>Password</strong></td>
<td>ilovef5</td>
</tr>
</tbody>
</table>
<img alt="../_images/class2-6.png" src="../_images/class2-6.png" />
<p>Able to login to Arcadia Financial trading page</p>
<img alt="../_images/class2-7.png" src="../_images/class2-7.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a basic Arcadia Financial Trading page <strong>WITHOUT</strong> GenAI Chatbot. We will enhance this apps to include GenAI chatbot and secure the chatbot in subsequent class.</p>
</div>
</div>
<div class="section" id="recap">
<h2>3 - Recap<a class="headerlink" href="#recap" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>You deploy NGINX Ingress Controller with App Protect to secure your modern application.</li>
<li>You deploy the Arcadia Financial microservices, which consist of multiple components: frontend, backend, money transfer, and refer-friend.</li>
<li>You expose Arcadia frontend using a Kubernetes (K8s) Ingress resource to allow access for users outside the Kubernetes cluster.</li>
<li>You verifed that you are able to access the site and successfully log in to the trading platform.</li>
</ol>
<div class="admonition attention">
<p class="first admonition-title">Attention</p>
<p class="last">Feel free to explore the YAML files and configurations manifest in the corresponding folder to gain a deeper understanding of the configuration nuances.</p>
</div>
<img alt="../_images/mission2-1.png" src="../_images/mission2-1.png" />
<div class="toctree-wrapper compound">
</div>
</div>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="../class1/class1.html" title="Class 1: The fundamental of Generative Artificial Intelligent (AI)" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="../class3/class3.html" title="Class 3: Architect, build and deploy AI Services" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../_static/js/index.js"></script>
  <script src="../_static/js/jquery.appear.js"></script>
  <script src="../_static/js/printThis.js"></script>
  <script src="../_static/js/bootstrap.min.js"></script>
  <script src="../_static/js/clouddocs.js"></script>
  <script src="../_static/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>